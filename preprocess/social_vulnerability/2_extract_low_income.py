"""
低收入戶資料表格非常複雜，所以我直接用手動填寫的 json 檔案來處理。
"""

import json

data = {
    "中正區": {
        "低收入戶戶數": 880,
        "行政區總人數": 148202
    },
    "大同區": {
        "低收入戶戶數": 1602,
        "行政區總人數": 118909
    },
    "中山區": {
        "低收入戶戶數": 1449,
        "行政區總人數": 215142
    },
    "松山區": {
        "低收入戶戶數": 781,
        "行政區總人數": 191610
    },
    "大安區": {
        "低收入戶戶數": 1050,
        "行政區總人數": 289660
    },
    "萬華區": {
        "低收入戶戶數": 3624,
        "行政區總人數": 171723
    },
    "信義區": {
        "低收入戶戶數": 1886,
        "行政區總人數": 204979
    },
    "士林區": {
        "低收入戶戶數": 2247,
        "行政區總人數": 263986
    },
    "北投區": {
        "低收入戶戶數": 2045,
        "行政區總人數": 240337
    },
    "內湖區": {
        "低收入戶戶數": 1425,
        "行政區總人數": 273396
    },
    "南港區": {
        "低收入戶戶數": 1014,
        "行政區總人數": 112596
    },
    "文山區": {
        "低收入戶戶數": 2327,
        "行政區總人數": 258140
    },
}

# calculate the low income rate
for district, d in data.items():
    d["低收入戶比例"] = round(d["低收入戶戶數"] / d["行政區總人數"] * 100, 2)

# save to json
with open("data/social_vulnerability/processed/low_income_district.json", "w") as f:
    json.dump(data, f, ensure_ascii=False, indent=2)